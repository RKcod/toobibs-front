<app-navbar></app-navbar>

<div class="container mt-4" style="padding-top: 86px;">
  <div class="row">
    <div class="col-md-8">
      <div class="justify-content-center text-center card" style="width: 100%; margin-bottom: 16px;">
        <div class="card-body">
          <div class="row">
            <div class="col-md-3 text-left">
              <img width="80px" height="80px" class="img-circle text-center"
                   src="{{api.WEB_BASED_URL+doctor?.profile_picture}}"
                   alt="Card image cap" style="border-radius: 50%; display: block;">


            </div>
            <div class="col-md-4 text-left" style="font-size: 1.1em;">
              <span style="color: rgb(29, 135, 187);">{{doctor?.first_name}} {{doctor?.last_name}}</span><br>
              <span>{{doctor?.speciality_name.name}}</span><br>
              <small>
                <span>{{doctor?.address}}</span><br>
                <span>{{doctor?.email}}</span><br>
                <span>{{doctor?.phone}}</span>
              </small>
            </div>
            <div class="col-md-5">
              <small *ngIf="doctor != null && doctor.do_teleconsult==1">
                <span><span class="mdi mdi-video video-round"
                            style="width: 30px; height: 30px; font-size: 1.5em; padding-left: 2px; padding-top: 2px;"></span> Téléconsultation</span><br>
              </small>

            </div>
          </div>
          <hr>
          <div class="text-left">
            <span class=" text-dark-b">Disponibilités</span><br><br>
            <div class="row">
              <div class="col-md-12" style="padding-top: 35px; padding-left: 50px;">
                <div style="top: 42px;"
                  class="cal-left-but"
                  (click)="prevWeek()"
                >
                  <span class="mdi mdi-chevron-left"></span>
                </div>
                <div style="top: 42px;"
                  class="cal-right-but"
                  (click)="nextWeek()"
                >
                  <span class="mdi mdi-chevron-right"></span>
                </div>
                <mwl-calendar-week-view
                  [events]="events"
                  locale="fr"
                  [dayStartHour]="8"
                  [dayStartMinute]="0"
                  [dayEndHour]="19"
                  [dayEndMinute]="0"
                  [viewDate]="viewDate"
                  (eventClicked)="eventClick2($event)"
                >
                </mwl-calendar-week-view>



                <!--
                <span class=" text-dark-b">Horaires de la semaine</span><br>
                <div class="row">
                  <div class="col-md-6" *ngFor="let d of groupedList" [ngClass]="{'hide': !checkDate(d.date)}">
                    <div class="" *ngIf="checkDate(d.date)" style="border: 1px solid #ccc;
    margin-bottom: 10px;">
                      <div class="card-header" style="text-transform: capitalize">
                        {{getDate(d.date)}} ({{d.date}})
                      </div>
                      <div style="padding-left: 6px;">
                      <span class="horaires" style="width: 57px; cursor:pointer;"
                            (click)="openRdv(doctor?.id, t.date, t.real_id)"
                            *ngFor="let t of d.availability; index as i">

                        {{api.formatTimeFromString(t.start_time)}}
      </span><br><br>
                      </div>
                    </div>

                  </div>
                </div>
                -->
                <!--span [ngClass]="{'padding-left': (i > 0 && d.date == doctor?.availabilities.data[i-1].date)}" *ngFor="let d of doctor?.availabilities.data; index as i"><small style="text-transform: capitalize;" *ngIf="checkDate(d.date)">{{i == 0 ? getDate(d.date) : ""}}{{(i > 0 && d.date != doctor?.availabilities.data[i-1].date) ? getDate(d.date): ""}} {{api.formatTimeFromString(d.start_time)}}</small><br></span-->

              </div>
              <!--div class="col-md-6">
                <ngb-datepicker *ngIf="doctor!= null" disabled #dp (dateSelect)="onDateSelection($event)"
                                [displayMonths]="1" [dayTemplate]="t"
                                outsideDays="hidden">
                </ngb-datepicker>

                <ng-template #t let-date let-focused="focused">
              <span class="custom-day"
                    [class.range]="isInside(date, null)">
                {{ date.day }}
              </span>
                </ng-template>
              </div-->
            </div>
            <!--hr>
            <span class=" text-dark-b">Présentation du professionnel de santé</span--><br><br>

          </div>
          <div class="text-left">
            <span class=" text-dark-b">Plus d'informations</span><br><br>
            <div class="row">
              <div class="col-md-4">
                <span class=" text-dark-b">Certifications</span><br>
                <span *ngIf="filterMeta('CERTIFICATION').length == 0">Aucune donnée</span>
                <div *ngFor="let e of filterMeta('CERTIFICATION'); index as i">
                  <div>
                    <span><small>{{e.start_year}} - {{e.end_year}}</small></span><br>
                    <span>{{e.title}} : {{e.at}}</span><br>
                    <span><small>{{e.description}}</small></span><br>
                  </div>
                  <hr *ngIf="i+1 < usermetas.length">
                </div>
                <br>
              </div>
              <div class="col-md-4">
                <span class=" text-dark-b">Exprériences professionelles</span><br>
                <span *ngIf="filterMeta('EXPERIENCE').length == 0">Aucune donnée</span>
                <div *ngFor="let e of filterMeta('EXPERIENCE'); index as i">
                  <div>
                    <span><small>{{e.start_year}} - {{e.end_year}}</small></span><br>
                    <span>{{e.title}} : {{e.at}}</span><br>
                    <span><small>{{e.description}}</small></span><br>
                  </div>
                  <hr *ngIf="i+1 < usermetas.length">
                </div>
                <br>
              </div>
              <div class="col-md-4">
                <span class=" text-dark-b">Parcours académique</span><br>
                <span *ngIf="filterMeta('ACADEMIQUE').length == 0">Aucune donnée</span>
                <div *ngFor="let e of filterMeta('ACADEMIQUE'); index as i">
                  <div>
                    <span><small>{{e.start_year}} - {{e.end_year}}</small></span><br>
                    <span>{{e.title}} : {{e.at}}</span><br>
                    <span><small>{{e.description}}</small></span><br>
                  </div>
                  <hr *ngIf="i+1 < usermetas.length">
                </div>
                <br>
              </div>
            </div>
            <!--hr>
            <span class=" text-dark-b">Présentation du professionnel de santé</span--><br><br>

          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4"><!--  iconUrl="https://demo.toobibs.com/marker_blue.png" -->
      <agm-map [latitude]="lat" [zoom]="zoom" [longitude]="lng">
        <agm-marker [latitude]="lat" [longitude]="lng" [iconUrl]="my_marker_icon.url"></agm-marker>
        <agm-marker [latitude]="r.lat" [longitude]="r.lng"
                    [title]="r.label" [iconUrl]="their_marker_icon.url" *ngFor="let r of positions" [openInfoWindow]="true">
          <agm-info-window>
            Dr {{r.doctor}}<br>
            {{r.phone}}<br>
            Centre : {{r.label}}
          </agm-info-window>
        </agm-marker>
      </agm-map>
      <br>
      <div class="card text-center" *ngIf="user == null || user.user_type == 'PATIENT'">
        <div class="card-body">
          <div class="card-title text-dark-b">Mode de paiements accepté</div>
          <hr>
          <div class="text-left ml-5">
            <div class="custom-checkbox custom-control custom-control-inline">
              <input type="checkbox" id="exampleCustomInline3" class="custom-control-input" checked disabled>
              <label class="custom-control-label" for="exampleCustomInline4">En liquide</label>
            </div>
            <br>
            <div class="custom-checkbox custom-control custom-control-inline">
              <input type="checkbox" id="exampleCustomInline4" class="custom-control-input" checked disabled>
              <label class="custom-control-label" for="exampleCustomInline">Mobile money</label>
            </div>
            <br>
            <div class="custom-checkbox custom-control custom-control-inline">
              <input type="checkbox" id="exampleCustomInline" class="custom-control-input" checked disabled>
              <label class="custom-control-label" for="exampleCustomInline">Paypal</label></div>
            <br><br>
          </div>

          <!--button type="submit" class="submit-button mr-0 btn btn-secondary no-shadow mb-2" style="height: auto;line-height: 1;margin-top: 0; width: 250px; border-radius: 5px;" [routerLink]="['/payment-methods/'+doctor?.id]">Paiement</button-->
          <button type="submit" class="submit-button mr-0 btn btn-secondary no-shadow mb-3"
                  style="height: auto;line-height: 1;margin-top: 0; width: 250px; border-radius: 5px;"
                  *ngIf="doctor != null && doctor.confirmed" [routerLink]="['/book-appointment/'+doctor?.id]">
                  Prendre rendez-vous
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
